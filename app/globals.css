@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Base & Tema ===== */
*,*::before,*::after{box-sizing:border-box}
html,body{
  margin:0;padding:0;background:#0a0a0a;color:#e5e7eb;line-height:1.45;
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji"
}
a{color:#b6ff2e;text-decoration:none}
a:hover{color:#d7ff54}

/* Medios siempre fluidos y sin desbordes */
img, video, canvas, svg { display:block; max-width:100%; height:auto; }
* { min-width: 0; }
html, body { overflow-x: hidden; }

/* ===== Contenedor ===== */
.rb-container{max-width:1200px;margin:0 auto;padding:0 16px}

/* ===== Header ===== */
.rb-header{position:sticky;top:0;z-index:50;background:#0b0b0b;border-bottom:1px solid #1f1f1f}

/* Topbar */
.rb-topbar{background:#0e0e0e;border-bottom:1px solid #1f1f1f;color:#cfcfcf;font-size:13px}
.rb-topbar-row{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:6px 0}
.rb-topbar-row .pill{display:inline-flex;align-items:center;gap:8px;opacity:.95}
.rb-topbar-row .pill+.pill{margin-left:22px}

/* Main header (logo | buscador | acciones) */
.rb-main{padding:12px 0}
.rb-main-row{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:16px}
.rb-brand{display:flex;align-items:center;gap:12px}
.rb-brand img{height:115px;width:auto}
.rb-brand-name{color:#b6ff2e;font-weight:700;font-size:22px}

/* Buscador */
.rb-search{position:relative;width:100%;max-width:680px;justify-self:center}
.rb-search input{
  width:100%;height:40px;border-radius:10px;border:1px solid #242424;background:#141414;color:#e5e7eb;
  padding:0 40px 0 12px
}
.rb-search button{
  position:absolute;right:8px;top:50%;transform:translateY(-50%);
  height:28px;width:28px;display:inline-flex;align-items:center;justify-content:center;
  background:transparent;border:0;color:#b6ff2e;cursor:pointer
}

/* Acciones header */
.rb-actions{display:inline-flex;align-items:center;gap:8px;justify-self:end}
.rb-action{
  display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;
  border:1px solid #232323;background:rgba(20,20,20,.8);color:#b6ff2e;
  transition:background .15s ease,border-color .15s ease;white-space:nowrap
}
.rb-action:hover{background:#181818;border-color:#2f2f2f}

/* ===== Nav + Mega ===== */
.rb-nav{border-top:1px solid #1f1f1f}
.rb-nav-row{display:flex;align-items:center;gap:8px;padding:8px 0}
.rb-pill{
  display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border-radius:.65rem;
  border:1px solid #27272a;background:rgba(24,24,27,.6);color:#b6ff2e;
  transition:background .15s ease,border-color .15s ease
}
.rb-pill:hover{background:#18181b;border-color:#3f3f46;color:#d7ff54}

/* Mega wrapper & panel (por defecto abre abajo) */
.rb-mega-wrap{position:relative;display:inline-block}
.rb-mega-panel{
  position:absolute;left:0;top:100%;margin-top:.6rem;
  width:min(1100px,calc(100vw - 2rem));
  background:#0d0d0d;border:1px solid #262626;border-radius:12px;
  box-shadow:0 14px 40px rgba(0,0,0,.55);z-index:60
}
.rb-mega-grid{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:2rem;padding:1.3rem 1.5rem}
.rb-mega-grid .col h4{margin:0 0 .75rem;font-size:.92rem;font-weight:700;color:#b6ff2e}
.rb-mega-grid .col ul{list-style:none;padding:0;margin:0}
.rb-mega-grid .col li+li{margin-top:.5rem}
.rb-mega-grid .col a{color:#fff}
.rb-mega-grid .col a:hover{color:#d7ff54}
.rb-mega-accent{height:4px;background:#84cc16;border-radius:0 0 12px 12px}

/* üëá En desktop: el mega-men√∫ se despliega HACIA EL LADO (flyout a la derecha) */
@media (min-width:1024px){
  .rb-mega-wrap{position:relative}
  .rb-mega-wrap .rb-mega-panel{
    top:49px;left:09px;margin-top:0;margin-left:.75rem; /* se pega al costado del trigger */
  }
}

/* ===== Hero / Secciones ===== */
.hero-wrap{max-width:1200px;margin:0 auto;padding:22px 16px 28px}
.hero-title{text-align:center;font-size:34px;font-weight:800;color:#fff;margin:8px 0 18px}
.hero-banner{height:420px;border-radius:16px;overflow:hidden}
.hero-banner img{width:100%;height:100%;object-fit:cover}
.section{padding:24px 0}
.section-title{font-size:24px;font-weight:700;margin-bottom:16px;text-align:center}

/* ===== Cards Grid ===== */
.products-grid{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:18px}
@media (min-width:768px){.products-grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
.product-card{background:#111;border:1px solid #262626;border-radius:12px;padding:14px;color:#e5e7eb}
.product-card h3{margin:10px 0 6px;font-weight:700}
.product-card .price{color:#b6ff2e;font-weight:700}

/* ===== Helper: nueva grilla de juegos ===== */
main[data-new-grid="1"] section[data-testid="new-grid"]{display:grid !important;grid-template-columns:1fr;gap:1.5rem}
@media (min-width:768px){main[data-new-grid="1"] section[data-testid="new-grid"]{grid-template-columns:repeat(2,minmax(0,1fr)) !important}}
@media (min-width:1024px){main[data-new-grid="1"] section[data-testid="new-grid"]{grid-template-columns:repeat(3,minmax(0,1fr)) !important}}
main[data-new-grid="1"] ul,main[data-new-grid="1"] li{border:0 !important;list-style:none !important;margin:0 !important;padding:0 !important}
main[data-new-grid="1"] [data-build-card] li{border:1px solid rgba(255,255,255,.08) !important;border-radius:12px !important;padding:8px 12px !important;margin:0 !important}
main[data-new-grid="1"] a,main[data-new-grid="1"] button{width:auto !important;display:inline-flex !important}

/* ===== Drawer + Overlay ===== */
.rb-overlay{position:fixed;inset:0;background:rgba(0,0,0,.55);opacity:0;pointer-events:none;transition:opacity .25s ease;z-index:9998}
.rb-overlay.open{opacity:1;pointer-events:auto}
.rb-drawer{
  position:fixed;top:0;right:0;width:min(420px,92vw);height:100vh;background:#0a0a0a;color:#e5e7eb;
  border-left:1px solid #262626;box-shadow:-12px 0 30px rgba(0,0,0,.35);
  transform:translateX(100%);transition:transform .25s ease;z-index:9999;display:flex;flex-direction:column
}
.rb-drawer.open{transform:translateX(0)}
.rb-drawer__header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #262626}
.rb-drawer__close{background:transparent;border:0;color:#e5e7eb;font-size:26px;line-height:1;cursor:pointer}
.rb-drawer__content{flex:1 1 auto;overflow:auto;padding:14px 16px}
.rb-drawer__footer{display:flex;gap:10px;padding:12px 16px;border-top:1px solid #262626;background:#0a0a0a}

/* Botones coherentes */
.rb-btn{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:10px;
  border:1px solid #b6ff2e;background:#b6ff2e;color:#0a0a0a;font-weight:700;cursor:pointer;text-decoration:none
}
.rb-btn:hover{filter:brightness(1.05)}
.rb-btn--ghost{background:transparent;color:#b6ff2e;border:1px solid #3a3a3a}

/* Miniaturas protegidas en drawer */
.rb-thumb{width:64px;height:64px}
.rb-thumb img{width:64px;height:64px;object-fit:cover;display:block}
.rb-drawer .h-16.w-16 img{object-fit:cover;display:block}

/* ===== Checkout (aislado) ===== */

/* Dos columnas: formulario (izq) | resumen (der) */
.checkout-page .grid-two{
  display:grid !important;
  grid-template-columns:1fr;      /* mobile */
  gap:1.5rem !important;
}
@media (min-width:768px){
  .checkout-page .grid-two{
    grid-template-columns:1fr 550px !important;  /* desktop: 1fr | 380px */
    align-items:start !important;
  }
}

/* === Ajustes finos checkout (no cambian tus medidas actuales) === */
.checkout-page section { padding-bottom: 12px !important; }
.checkout-page aside{
  position:sticky !important;top:1.5rem !important;
  border:1px solid #262626 !important;background:rgba(10,10,10,.6) !important;
  border-radius:16px !important;padding:16px !important
}
.checkout-page aside img{
  width:50px !important;height:50px !important;object-fit:cover !important;display:block !important;border-radius:8px
}
.checkout-page section{
  background:rgba(15,15,15,.5) !important;border:1px solid #262626 !important;border-radius:16px !important;padding:16px
}
.checkout-page section form{ max-width:700px; }
.checkout-page section input,
.checkout-page section select,
.checkout-page section textarea{ width:100%; max-width:700px; }
.checkout-page .actions{ display:flex;gap:.75rem;margin-top:1rem;flex-wrap:wrap }
.checkout-page .actions .rb-btn{ min-width:160px }

/* ===== Helper de checkout alternativo (si usaste .rb-checkout) ===== */
.rb-checkout .grid-checkout{display:grid;grid-template-columns:1fr;gap:1.5rem}
@media (min-width:1024px){.rb-checkout .grid-checkout{grid-template-columns:1fr 380px}}
.rb-checkout ul,.rb-checkout li{list-style:none !important;border:0 !important;margin:0;padding:0}
.rb-checkout img{max-width:none}
.rb-checkout [data-thumb],.rb-checkout .thumb{width:64px !important;height:64px !important}
.rb-checkout [data-thumb] img,.rb-checkout .thumb img{width:64px !important;height:64px !important;object-fit:cover !important;display:block !important}
.rb-checkout aside .card,.rb-checkout aside>div{border-radius:16px}

/* ===================================================================
   SOLO M√ìVIL (overrides). No tocan desktop.
   =================================================================== */

/* Compacta topbar / header / nav en pantallas chicas */
@media (max-width: 640px) {
  .rb-topbar { font-size: 12px; }
  .rb-topbar-row { flex-wrap: wrap; row-gap: 6px; }
  .rb-topbar-row .pill + .pill { margin-left: 0; }

  .rb-main { padding: 8px 0; }
  .rb-brand img { height: 48px; }          /* antes 115px */
  .rb-brand-name { font-size: 18px; }

  /* Reestructura header: logo + acciones arriba, buscador abajo */
  .rb-main-row { grid-template-columns: auto 1fr; gap: 10px; }
  .rb-actions { justify-self: end; gap: 6px; }
  .rb-search { order: 3; grid-column: 1 / -1; max-width: none; }
  .rb-search input { height: 38px; }

  .rb-action { padding: 6px 10px; font-size: 13px; }

  /* P√≠ldoras navegables con scroll suave si no caben */
  .rb-nav-row {
    overflow-x: auto; -webkit-overflow-scrolling: touch; scrollbar-width: none;
    padding-bottom: 6px;
  }
  .rb-nav-row::-webkit-scrollbar { display: none; }
  .rb-pill { padding: .45rem .65rem; }
}

/* Mega: columnas y panel sin desbordes en m√≥vil */
@media (max-width: 768px) {
  .rb-mega-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 1rem; }
}
@media (max-width: 640px) {
  .rb-mega-grid { grid-template-columns: 1fr; }
  .rb-mega-panel {
    position: fixed !important;
    left: 0 !important; right: 0 !important;
    top: calc(56px + 48px); /* header+nav aprox */
    width: 100vw !important; max-height: 70vh; overflow: auto;
    border-radius: 0; margin: 0 !important; z-index: 70;
  }
}

/* N√∫cleo: fuerza 1 columna y evita anchos fijos SOLO dentro de main[data-mobile-fix] */
@media (max-width: 640px) {
  main[data-mobile-fix="1"] * { min-width: 0; }

  /* Cualquier grid dentro de main => 1 col */
  main[data-mobile-fix="1"] :is(section,div,ul,ol).grid { grid-template-columns: 1fr !important; }
  /* Clases tailwind grid-cols-* => 1 col */
  main[data-mobile-fix="1"] [class*="grid-cols-"] { grid-template-columns: 1fr !important; }
  /* Evita col-span inadecuados */
  main[data-mobile-fix="1"] [class*="col-span-"] { grid-column: auto !important; }

  /* Flex: envolver si no cabe */
  main[data-mobile-fix="1"] :is(.flex,.inline-flex) { flex-wrap: wrap !important; }

  /* Rompe anchos fijos comunes */
  main[data-mobile-fix="1"] [style*="width"] { width: 100% !important; max-width: 100% !important; }
  main[data-mobile-fix="1"] [class*="w-["]   { width: 100% !important; max-width: 100% !important; }

  /* √çtems de listas/tarjetas ocupan todo el ancho disponible */
  main[data-mobile-fix="1"] :is(li, .product-card, [data-build-card], .rb-card) {
    width: 100% !important; max-width: 100% !important;
  }

  /* Im√°genes seguras */
  main[data-mobile-fix="1"] img {
    display: block !important; width: 100% !important; height: auto !important; object-fit: cover !important;
  }

  /* Headings m√°s contenidos */
  .hero-title { font-size: 28px; }
  .section-title { font-size: 20px; }
  .hero-banner { height: 220px; }
}
